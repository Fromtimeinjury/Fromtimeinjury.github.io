<!DOCTYPE html>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  
  <title itemprop="name">泛微OA流程表单之实用的JS及技巧 | Lucky</title>
  
    <link rel="shortcut icon" href="/images/favicon.ico">
  
  <meta http-equiv="x-dns-prefetch-control" content="on">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+SerifMerriweather|Merriweather+Sans|Source+Code+Pro|Ubuntu:400,700|Noto+Serif+SC" media="all">
  <link rel="dns-prefetch" href="//cdn.jsdelivr.net">
  <link rel="stylesheet" id="saukra_css-css" href="/css/style.css" type="text/css" media="all">
  <link rel="stylesheet" href="/css/lib.min.css" media="all">
  <link rel="stylesheet" href="/css/font.css" media="all">
  <link rel="stylesheet" href="/css/insight.css" media="all">
  <link rel="stylesheet" href="/css/jquery.fancybox.min.css" media="all">
  <link rel="stylesheet" href="/css/zoom.css" media="all">
  <link rel="stylesheet" type="text/css" href="/css/sharejs.css">
<!--   <link rel="stylesheet" id="saukra_css-css" href="https://2heng.xin/wp-content/cache/autoptimize/css/autoptimize_ad42a61f4c7d4bdd9f91afcff6b5dda5.css
" type="text/css" media="all"> -->
  <script>
  /*Initial Variables*/
  var mashiro_option = new Object();
  var mashiro_global = new Object();
  mashiro_option.NProgressON = true;
  /* 
   * 邮箱信息之类的东西可以填在这里，这些js变量基本都作用于sakura-app.js
   * 这样的设置仅是为了方便在基于PHP开发的主题中设置js变量，既然移植到了Node上，我想或许可以精简这一逻辑吧
   */
  mashiro_option.email_domain = "";
  mashiro_option.email_name = "";
  mashiro_option.cookie_version_control = "";
  mashiro_option.qzone_autocomplete = false;
  mashiro_option.site_name = "こううんLucky";
  mashiro_option.author_name = "Lucky";
  mashiro_option.site_url = "https://sakura.i4cu.xyz";
  mashiro_option.v_appId = "GyC3NzMvd0hT9Yyd2hYIC0MN-gzGzoHsz";
  mashiro_option.v_appKey = "mgOpfzbkHYqU92CV4IDlAUHQ";
  mashiro_option.mathjax = "0";
  mashiro_option.qq_api_url = "https://api.mashiro.top/qqinfo/"; 
  mashiro_option.qq_avatar_api_url = "https://api.mashiro.top/qqinfo/";

  // mashiro_option.jsdelivr_css_src = "https://cdn.jsdelivr.net/gh/moezx/cdn@3.4.5/css/lib.min.css";
  // mashiro_option.float_player_on = true;

  /*End of Initial Variables*/
  </script>
  <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script><link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet"><style>
  .pace .pace-progress {  background: #1E92FB; /*进度条颜色*/
  height: 3px;  }
  .pace .pace-progress-inner {  box-shadow: 0 0 10px #1E92FB, 0 0 5px     #1E92FB; /*阴影颜色*/
  }
  .pace .pace-activity {  border-top-color: #1E92FB;    /*上边框颜色*/
  border-left-color: #1E92FB;    /*左边框颜色*/
  }</style>
  <script type="text/javascript">
  var bg = "https://cdn.jsdelivr.net/gh/Fromtimeinjury/cdn@1.1/img/cover/bg.png,https://cdn.jsdelivr.net/gh/Fromtimeinjury/cdn@1.1/img/cover/bg_1.jpg,https://cdn.jsdelivr.net/gh/Fromtimeinjury/cdn@1.1/img/cover/bg_2.jpg,https://cdn.jsdelivr.net/gh/Fromtimeinjury/cdn@1.1/img/cover/bj_2.jpg,https://cdn.jsdelivr.net/gh/Fromtimeinjury/cdn@1.1/img/cover/bj_3.jpg,https://cdn.jsdelivr.net/gh/Fromtimeinjury/cdn@1.1/img/cover/bj_4.jpg,https://cdn.jsdelivr.net/gh/Fromtimeinjury/cdn@1.1/img/cover/bj_5.jpg,https://cdn.jsdelivr.net/gh/Fromtimeinjury/cdn@1.1/img/cover/bj_6.jpg,https://cdn.jsdelivr.net/gh/Fromtimeinjury/cdn@1.1/img/cover/bj_9.jpg,https://cdn.jsdelivr.net/gh/Fromtimeinjury/cdn@1.1/img/cover/bj_10.jpg,https://cdn.jsdelivr.net/gh/Fromtimeinjury/cdn@1.1/img/cover/bj_12.jpg,https://cdn.jsdelivr.net/gh/Fromtimeinjury/cdn@1.1/img/cover/bj_13.jpg".split(",");
  var bgindex = Math.floor(Math.random()*bg.length);
  if (!!window.ActiveXObject || "ActiveXObject" in window) { //is IE?
    alert('朋友，IE浏览器未适配哦~');
  }
  </script>
  <style type="text/css">
  .hljs-ln{border-collapse:collapse}.hljs-ln td{padding:0}.hljs-ln-n:before{content:attr(data-line-number)}
  </style>
  <style type="text/css">.site-top .lower nav{display:block !important;}.author-profile i,.post-like a,.post-share .show-share,.sub-text,.we-info a,span.sitename,.post-more i:hover,#pagination a:hover,.post-content a:hover,.float-content i:hover{color:#FE9600}.feature i,.download,.navigator i:hover,.links ul li:before,.ar-time i,span.ar-circle,.object,.comment .comment-reply-link,.siren-checkbox-radio:checked + .siren-checkbox-radioInput:after{background:#FE9600}::-webkit-scrollbar-thumb{background:#FE9600}.download,.navigator i:hover,.link-title,.links ul li:hover,#pagination a:hover,.comment-respond input[type='submit']:hover{border-color:#FE9600}.entry-content a:hover,.site-info a:hover,.comment h4 a,#comments-navi a.prev,#comments-navi a.next,.comment h4 a:hover,.site-top ul li a:hover,.entry-title a:hover,#archives-temp h3,span.page-numbers.current,.sorry li a:hover,.site-title a:hover,i.iconfont.js-toggle-search.iconsearch:hover,.comment-respond input[type='submit']:hover{color:#FE9600}.comments .comments-main{display:block !important;}.comments .comments-hidden{display:none !important;}background-position:center center;background-attachment:inherit;}
  </style>
  <script src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/js/hititle.js"></script>
</head>
</html>



<body class="page-template page-template-user page-template-page-analytics page-template-userpage-analytics-php page page-id-1297 chinese-font serif isWebKit">
  <div class="scrollbar" id="bar">
  </div>
  <a href="#" class="cd-top faa-float animated"></a>
  <section id="main-container">
    <div class="headertop ">
  <div id="banner_wave_1"></div>
  <div id="banner_wave_2"></div>
  <figure id="centerbg" class="centerbg">
    <div class="focusinfo no-select">
      <div class="header-tou">
        <a href="https://sakura.i4cu.xyz">
          <img src="https://cdn.jsdelivr.net/gh/Fromtimeinjury/cdn@1.1/img/custom/avatar.jpg">
        </a>
      </div>
      <div class="header-info">
        <!-- <p>Live your life with passion! With some drive!</p> -->
        <p id="jinrishici-sentence">正在加载今日诗词....</p>
        <script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script>
        <div class="top-social_v2">

        <div class="top-social_v2">
          <li id="bg-pre">
            <img class="flipx" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/next-b.svg">
          </li>
          
            
              
                <li>
                  <a href="https://github.com/Fromtimeinjury" target="_blank" class="social-github" title="github">
                    <img src="https://cdn.jsdelivr.net/gh/Fromtimeinjury/cdn@1.1/img/social/github.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://music.163.com/#/user/home?id=490897682" target="_blank" class="social-github" title="wangyiyun">
                    <img src="https://cdn.jsdelivr.net/gh/Fromtimeinjury/cdn@1.1/img/social/wangyiyun.png">
                  </a>
                </li>
              
            
              
                <li class="wechat">
                  <a href="/#">
                    <img src="https://cdn.jsdelivr.net/gh/Fromtimeinjury/cdn@1.1/img/social/wechat.png">
                  </a>
                  <div class="wechatInner">
                    <img src="https://cdn.jsdelivr.net/gh/Fromtimeinjury/cdn@1.1/img/custom/wechat.jpg">
                  </div>
                </li>
              
            
          
          <li id="bg-next">
            <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/next-b.svg">
          </li>
        </div>
      </div>
    </div>
  </figure>
  <div id="video-container" style="">
    <video style="object-fit: fill" id="bgvideo" class="video" video-name="" src="" width="auto" preload="auto">
    </video>
    <div id="video-btn" class="loadvideo videolive">
    </div>
    <div id="video-add">
    </div>
    <div class="video-stu">
    </div>
  </div>
  <div class="headertop-down faa-float animated" onclick="headertop_down()">
    <span>
      <i class="fa fa-chevron-down" aria-hidden="true">
      </i>
    </span>
  </div>
</div>
    <div id="page" class="site wrapper">
      <header class="site-header no-select gizle sabit" role="banner">
  <div class="site-top">
    <div class="site-branding">
      <span class="site-title">
        <span class="logolink moe-mashiro">
          <a href="/">
            <span class="sakurasono">こううん</span>
            <span class="shironeko">Lucky</span>
          </a>
        </span>
      </span>
    </div>
    <div class="searchbox search-form-submit">
      <i class="iconfont js-toggle-search iconsearch icon-search">
      </i>
    </div>
    <div id="show-nav" class="showNav mobile-fit">
      <div class="line line1">
      </div>
      <div class="line line2">
      </div>
      <div class="line line3">
      </div>
    </div>
    <div class="lower-cantiner">
      <div class="lower">
        <nav class="mobile-fit-control hide">
          <ul id="menu-new" class="menu">
            
              <li>
                <a href="/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-fort-awesome faa-shake" aria-hidden="true"></i>
                    首页
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/archives">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-archive faa-shake" aria-hidden="true"></i>
                    归档
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/categories/技术/">
                          <i class="fa fa-code" aria-hidden="true"></i>
                          技术
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/生活/">
                          <i class="fa fa-file-text-o" aria-hidden="true"></i>
                          生活
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/资源/">
                          <i class="fa fa-cloud-download" aria-hidden="true"></i>
                          资源
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/随想/">
                          <i class="fa fa-commenting-o" aria-hidden="true"></i>
                          随想
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/转载/">
                          <i class="fa fa-book" aria-hidden="true"></i>
                          转载
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="javascript:;">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-list-ul faa-vertical" aria-hidden="true"></i>
                    清单
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/tags/悦读/">
                          <i class="fa fa-th-list faa-bounce" aria-hidden="true"></i>
                          书单
                        </a>
                      </li>
                    
                      <li>
                        <a href="/bangumi/">
                          <i class="fa fa-film faa-vertical" aria-hidden="true"></i>
                          番组
                        </a>
                      </li>
                    
                      <li>
                        <a href="/music/">
                          <i class="fa fa-headphones" aria-hidden="true"></i>
                          歌单
                        </a>
                      </li>
                    
                      <li>
                        <a href="/tags/图集/">
                          <i class="fa fa-photo" aria-hidden="true"></i>
                          图集
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="/tags/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-tag" aria-hidden="true"></i>
                    标签
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/comment/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-pencil-square-o faa-tada" aria-hidden="true"></i>
                    留言板
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/links/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-link faa-shake" aria-hidden="true"></i>
                    友人帐
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/donate/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-heart faa-pulse" aria-hidden="true"></i>
                    赞赏
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-leaf faa-wrench" aria-hidden="true"></i>
                    关于
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/about/">
                          <i class="fa fa-meetup" aria-hidden="true"></i>
                          我？
                        </a>
                      </li>
                    
                      <li>
                        <a href="/theme-sakura/">
                          <i class="fa iconfont icon-sakura" aria-hidden="true"></i>
                          主题
                        </a>
                      </li>
                    
                      <li>
                        <a href="/lab/">
                          <i class="fa fa-cogs" aria-hidden="true"></i>
                          Lab
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="/client/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-android faa-vertical" aria-hidden="true"></i>
                    客户端
                  </span>
                </a>
                
              </li>
            
          </ul>
        </nav>
      </div>
    </div>
  </div>
</header>

      <link rel="stylesheet" type="text/css" href="/css/sharejs.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css">
<div class="pattern-center-blank"></div>

<div id="content" class="site-content">
  <div id="primary" class="content-area">
    <main id="main" class="site-main" role="main">
      <article id="post-1" class="post-1 post type-post status-publish format-standard has-post-thumbnail hentry category-uncategorized">
        <div class="toc"></div>
        <!--<div class="toc-entry-content"><!-- 套嵌目录使用（主要为了支援评论）-->
        
          <header class="entry-header">
            <h1 class="entry-title">泛微OA流程表单之实用的JS及技巧</h1>
            <p class="entry-census">Lucky&nbsp;·&nbsp;2021-7-19&nbsp;·&nbsp;<span id="busuanzi_value_page_pv"></span>次阅读</p></p>

            <hr>
          </header>
        
        <div class="entry-content">
          
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css">
<style>
#github svg {
  transition: all 1s;
  fill: #222;
  color: #fff;
  position: absolute;
  top: 0;
  right: 0;
  border: 0;
  width: 80px;
  height: 80px;
}
#github:hover svg {
  width: 160px;
  height: 160px;
}
</style>
<script src="https://cdn.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/autoload.js"></script>

<h1 id="项目实施与开发中实用的js及技巧"><a href="#项目实施与开发中实用的js及技巧" class="headerlink" title="项目实施与开发中实用的js及技巧"></a>项目实施与开发中实用的js及技巧</h1><h2 id="一、收藏的网址"><a href="#一、收藏的网址" class="headerlink" title="一、收藏的网址"></a>一、收藏的网址</h2><blockquote>
<p>泛微OA流程表单之实用的JS及技巧：<a href="https://blog.csdn.net/Y_6155/article/details/109019036" target="_blank" rel="noopener">https://blog.csdn.net/Y_6155/article/details/109019036</a></p>
<p>泛微ecology8前端二次开发：<a href="https://www.cnblogs.com/lroy/category/1556908.html" target="_blank" rel="noopener">https://www.cnblogs.com/lroy/category/1556908.html</a></p>
<p>泛微OA常用JS代码块：<a href="http://www.manongjc.com/detail/14-pfaupuzgbzqjocx.html" target="_blank" rel="noopener">http://www.manongjc.com/detail/14-pfaupuzgbzqjocx.html</a></p>
</blockquote>
<h2 id="二、常用模板"><a href="#二、常用模板" class="headerlink" title="二、常用模板"></a>二、常用模板</h2><h3 id="模板一、-格式模板"><a href="#模板一、-格式模板" class="headerlink" title="模板一、 格式模板"></a>模板一、 格式模板</h3><pre><code class="javascript">&lt;!-- script代码，如果需要引用js文件，请使用与HTML中相同的方式。 --&gt;

&lt;script src=&quot;/zzwjsp/lc/js/titlesplicingc.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
jQuery(document).ready(function () {

    //标题拼接
  $(&quot;#field34624&quot;).bindPropertyChange(function () {
    var sz_xm = $(&quot;#field34633span a&quot;).text(); //申请人组织
        var ID = &quot;field34632&quot;;
        pinjie(ID, sz_xm );
    });

    //判断日期
    $(&quot;#field34627&quot;).bindPropertyChange(function () {
        var date1 = jQuery(&quot;#field34626&quot;).val();
        var date2= jQuery(&quot;#field34627&quot;).val();
        if(date1&lt; date2){
            alert(&quot;日期不符合要求&quot;);
            document.getElementById(&quot;field34627span&quot;).innerHTML =  &quot;&quot;; 
            //上面代码可以写成
            //var tjrq = $(&quot;field34627span&quot;).val(&quot;&quot;);
          var rowindex1 =parseInt($(&#39;#indexnum0&#39;).val());//明细表1行号 
          var rowindex2 =parseInt($(&#39;#indexnum1&#39;).val())+1;//明细表2行号 
        }
     });
});

&lt;/script&gt;
</code></pre>
<h3 id="模板二、表单：显示与隐藏、编辑与必填"><a href="#模板二、表单：显示与隐藏、编辑与必填" class="headerlink" title="模板二、表单：显示与隐藏、编辑与必填"></a>模板二、表单：显示与隐藏、编辑与必填</h3><pre><code class="javascript">/** 
 * 触发事件
**/
$(&quot;#field37067&quot;).bindPropertyChange(function () {
    var start =  jQuery(&quot;#field37067&quot;).val(); 
    var rq= start.substring(0, 7);
    pinjie(&quot;field40944&quot;,rq)
});

$(&quot;#field37069&quot;).bindPropertyChange(function () {
    var end  =  jQuery(&quot;#field37069&quot;).val();    
    var rq= end.substring(0, 7);
    pinjie(&quot;field40945&quot;,rq)      
}); 

// 隐藏行
$(&quot;#id_01&quot;).hide();
// 调用移除必填验证函数
// 移除必填验证，主表文本框、选择框
removeInputCheckField(&#39;field37927&#39;, &#39;field37927span&#39;);  
// 移除必填验证，主表浏览框
removeInputCheckField(&#39;field37927&#39;, &#39;field37927spanimg&#39;);

 // 显示行
 $(&quot;#id_01&quot;).show();
 // 调用添加必填验证函数
 // 添加必填验证，主表文本框、选择框
 addInputCheckField(&#39;field37927&#39;, &#39;field37927span&#39;);  
 // 添加必填验证，主表浏览框
 addInputCheckField(&#39;field37927&#39;, &#39;field37927spanimg&#39;); 
</code></pre>
<h2 id="三、参考代码"><a href="#三、参考代码" class="headerlink" title="三、参考代码"></a>三、参考代码</h2><h3 id="（一）、泛微oa流程表单之实用的js及技巧"><a href="#（一）、泛微oa流程表单之实用的js及技巧" class="headerlink" title="（一）、泛微oa流程表单之实用的js及技巧"></a>（一）、泛微oa流程表单之实用的js及技巧</h3><p>​      <strong>网址：</strong><a href="https://blog.csdn.net/Y_6155/article/details/109019036" target="_blank" rel="noopener">https://blog.csdn.net/Y_6155/article/details/109019036</a></p>
<h4 id="1-流程提交和建模保存方法，需要对表单保存前校验重写该方法："><a href="#1-流程提交和建模保存方法，需要对表单保存前校验重写该方法：" class="headerlink" title="1.流程提交和建模保存方法，需要对表单保存前校验重写该方法："></a>1.流程提交和建模保存方法，需要对表单保存前校验重写该方法：</h4><pre><code class="javascript">checkCustomize = function(){return true;};
</code></pre>
<h4 id="2-表单页面字段取值："><a href="#2-表单页面字段取值：" class="headerlink" title="2.表单页面字段取值："></a>2.表单页面字段取值：</h4><pre><code class="javascript">jQuery(&quot;#fieldid&quot;).val()
</code></pre>
<h4 id="3、日期字段比较："><a href="#3、日期字段比较：" class="headerlink" title="3、日期字段比较："></a>3、日期字段比较：</h4><pre><code class="javascript">var date1 = jQuery(&quot;#field1id&quot;).val();
var date2 = jQuery(&quot;#field2id&quot;).val();
//获取值后直接进行比较：
if(date1&gt;=date2){}
</code></pre>
<h4 id="4、明细表循环获取值"><a href="#4、明细表循环获取值" class="headerlink" title="4、明细表循环获取值"></a>4、明细表循环获取值</h4><p>PC端：</p>
<pre><code class="javascript">jQuery(&quot;input[name=&#39;check_node_0&#39;]&quot;).each(function(){
            var index = jQuery(this).val();
            jQuery(“#fieldid_”+index).val();
</code></pre>
<p>手机端：</p>
<pre><code class="javascript">jQuery(&quot;input[name=&#39;check_node_0&#39;]&quot;).each(function(){
            var index = jQuery(this).attr(‘_rowindex’);
            jQuery(“#fieldid_”+index).val();
});
</code></pre>
<h4 id="5、控制明细表里行隐藏或显示："><a href="#5、控制明细表里行隐藏或显示：" class="headerlink" title="5、控制明细表里行隐藏或显示："></a>5、控制明细表里行隐藏或显示：</h4><pre><code class="javascript">jQuery(jQuery(’#fieldid_i’).parents(‘tr’)[0]).hide();
jQuery(jQuery(’#fieldid_i’).parents(‘tr’)[0]).show();
</code></pre>
<h4 id="6、系统打开的对话窗口："><a href="#6、系统打开的对话窗口：" class="headerlink" title="6、系统打开的对话窗口："></a>6、系统打开的对话窗口：</h4><pre><code class="javascript">function openDialog(){
      dialog = new window.top.Dialog();
      dialog.currentWindow = window;
      dialog.Width = 600;宽度
      dialog.Height = 380;//高度
      dialog.Title = &quot;title&quot;;//标题
      dialog.URL =url;//显示地址
      dialog.OKEvent = function(){//弹出框确认事件
        dialog.close();
      };
      dialog.show();
    }
</code></pre>
<h4 id="7、系统打开的一个弹出窗口："><a href="#7、系统打开的一个弹出窗口：" class="headerlink" title="7、系统打开的一个弹出窗口："></a>7、系统打开的一个弹出窗口：</h4><pre><code class="javascript">openFullWindow(url);
</code></pre>
<h4 id="8、给流程或建模页面增加按钮技巧：可通过增加一个字段（任意类型），通过jQuery的append-或after-方法增加按钮"><a href="#8、给流程或建模页面增加按钮技巧：可通过增加一个字段（任意类型），通过jQuery的append-或after-方法增加按钮" class="headerlink" title="8、给流程或建模页面增加按钮技巧：可通过增加一个字段（任意类型），通过jQuery的append()或after()方法增加按钮"></a>8、给流程或建模页面增加按钮技巧：可通过增加一个字段（任意类型），通过jQuery的append()或after()方法增加按钮</h4><pre><code class="javascript">jQuery(“#fielid”).append(“&lt;input type=&#39;button&#39; class=&#39;e8_btn_top_first&#39; value=&#39;按钮&#39; id=&#39;saveBtn&#39; onclick=&#39;fun();&#39;/&gt;”);
</code></pre>
<h4 id="9、判断checkbox的选择状态："><a href="#9、判断checkbox的选择状态：" class="headerlink" title="9、判断checkbox的选择状态："></a>9、判断checkbox的选择状态：</h4><pre><code class="javascript">jQuery(&quot;#inputid&quot;).is(&#39;:checked&#39;)，//为true表示选中
</code></pre>
<h4 id="10、使所用的明细行选中状态："><a href="#10、使所用的明细行选中状态：" class="headerlink" title="10、使所用的明细行选中状态："></a>10、使所用的明细行选中状态：</h4><pre><code class="javascript">jQuery(&quot;input[name=check_node_0]&quot;).attr(&quot;checked&quot;,true);
</code></pre>
<h4 id="11、主表字段带出明细表字段的值：后台通过将数据已json数组的格式输出，前台通过ajax获取循环读取赋值。"><a href="#11、主表字段带出明细表字段的值：后台通过将数据已json数组的格式输出，前台通过ajax获取循环读取赋值。" class="headerlink" title="11、主表字段带出明细表字段的值：后台通过将数据已json数组的格式输出，前台通过ajax获取循环读取赋值。"></a>11、主表字段带出明细表字段的值：后台通过将数据已json数组的格式输出，前台通过ajax获取循环读取赋值。</h4><pre><code class="javascript">jQuery.ajax({
    type:&quot;POST&quot;,
    url:url,
    data:{ &quot;param&quot;:value},
    success:function(res){
        res = res.replace(/[\r]/g,&quot;&quot;);  //替换换行
            res = res.replace(/[\n]/g,&quot;&quot;);  //替换回车
      var json = eval(&quot;(&quot;+res+&quot;)&quot;);
        jQuery.each(json.data,function(i){
                addRow0(0);
    var rowIndex=jQuery(&quot;input[name=check_node_0]:last&quot;).val(); 
                jQuery(&quot;#fieldid_&quot;+rowIndex).val(json.data[i].value);
   jQuery(&quot;#fieldid_&quot;+rowIndex+&quot;span&quot;).text(json.data[i].value);
            });
          },
    error:function(e){}
  })  ;
</code></pre>
<h4 id="12、自定义删除明细行弹出确认提示，如何省略这提示："><a href="#12、自定义删除明细行弹出确认提示，如何省略这提示：" class="headerlink" title="12、自定义删除明细行弹出确认提示，如何省略这提示："></a>12、自定义删除明细行弹出确认提示，如何省略这提示：</h4><pre><code class="javascript">//重写明细删除方法
isdel=function(){  
  return true;  
}
</code></pre>
<h4 id="13、获取日期"><a href="#13、获取日期" class="headerlink" title="13、获取日期"></a>13、获取日期</h4><pre><code class="javascript">   //格式化日期,形如yyyy-mm-dd
   function formatDate(date) {      
       var myyear = date.getFullYear();     
         var mymonth = date.getMonth()+1;     
         var myweekday = date.getDate();      
         if(mymonth &lt; 10){     
            mymonth = &quot;0&quot; + mymonth;     
       }      
       if(myweekday &lt; 10){     
          myweekday = &quot;0&quot; + myweekday;     
         }     
       return (myyear+&quot;-&quot;+mymonth + &quot;-&quot; + myweekday);   


    格式化日期：2021-6-18 18:00:01
    function getdate() {
     var now = new Date();
     var   Y = now.getFullYear();
     var   M = now.getMonth() + 1;
     var   D = now.getDate();
     var   m = M &lt; 10 ? &quot;0&quot; + M : M;
     var   d = D &lt; 10 ? &quot;0&quot; + D : D;
     return Y + &quot;-&quot; + m + &quot;-&quot; + d + &quot; &quot; + now.toTimeString().substr(0, 8);
   }
</code></pre>
<h4 id="14、计算两个日期的相差天数："><a href="#14、计算两个日期的相差天数：" class="headerlink" title="14、计算两个日期的相差天数："></a>14、计算两个日期的相差天数：</h4><pre><code class="javascript">function getDateDiff(date1,date2){
      var arr1=date1.split(&#39;-&#39;);
    var arr2=date2.split(&#39;-&#39;);
    var d1=new Date(arr1[0],parseInt(arr1[1],10)-1,arr1[2]);
    var d2=new Date(arr2[0],parseInt(arr2[1],10)-1,arr2[2]);
    var result = (d2.getTime()-d1.getTime())/(1000*3600*24)
    if(result &lt; 0)
    result = 0;
    return result;
}
</code></pre>
<h4 id="14、场-景根据上传的附件选择第一个附件的名称作为流程的某个字段的值或标题，首先字段或标题设置为空："><a href="#14、场-景根据上传的附件选择第一个附件的名称作为流程的某个字段的值或标题，首先字段或标题设置为空：" class="headerlink" title="14、场 景根据上传的附件选择第一个附件的名称作为流程的某个字段的值或标题，首先字段或标题设置为空："></a>14、场 景根据上传的附件选择第一个附件的名称作为流程的某个字段的值或标题，首先字段或标题设置为空：</h4><pre><code class="javascript">setInterval(&quot;fileNameToRequestName()&quot;,200);
function fileNameToRequestName(){
  var index=1;
  var requestname = jQuery(&quot;#requestname&quot;).val();
  jQuery(&quot;.progressWrapper&quot;).each(function(){
    if(index==1){
      var $this = jQuery(this).children(&quot;div&quot;);
      var progressName = $this.children(&quot;div.progressName&quot;).text();
      progressName = progressName.substring(0,progressName.lastIndexOf(&quot;.&quot;));
      var progressBarStatus = $this.children(&quot;div.progressBarStatus&quot;).text();
      if(requestname==&#39;&#39;){
        if(&quot;Cancelled&quot;!=progressBarStatus){
          jQuery(&quot;#requestname&quot;).val(progressName);
          index++;
        }
      }
    }
  });
}
</code></pre>
<h4 id="15、根据页面上选择的值在一块区域动态显示页面："><a href="#15、根据页面上选择的值在一块区域动态显示页面：" class="headerlink" title="15、根据页面上选择的值在一块区域动态显示页面："></a>15、根据页面上选择的值在一块区域动态显示页面：</h4><pre><code class="javascript">方法-：
1、添加一个iframe，命名iframe的id。
2、绑定点击事件，方法：
Window.open(url,iframe的id);

方法二：
1、 添加一个iframe，命令iframe的id，并附上默认的src
2、 绑定事件方法：
jQuery(“iframe”).attr(‘src’,url);
document.getElementById(&#39;iframe&#39;).src=src;
</code></pre>
<h4 id="16、需要获取配置文件的值"><a href="#16、需要获取配置文件的值" class="headerlink" title="16、需要获取配置文件的值:"></a>16、需要获取配置文件的值:</h4><pre><code class="javascript">function getPropValue(propname,fieldname){
 var result = &#39;&#39;;
 jQuery.ajax({
  url: &#39;url?poopname=&#39;+propname+&#39;&amp;fieldname=&#39;+fieldname,
     dataType: &quot;text&quot;, 
     contentType : &quot;charset=gbk&quot;,  
     async:false, 
     success:function(data){
      result = jQuery.trim(data);
     },
     error:function(){},
　　}); 
 return result;
}
</code></pre>
<h4 id="17、关闭对话框刷新当前页面，在关闭的对话框的动作中调用延时刷新的方法"><a href="#17、关闭对话框刷新当前页面，在关闭的对话框的动作中调用延时刷新的方法" class="headerlink" title="17、关闭对话框刷新当前页面，在关闭的对话框的动作中调用延时刷新的方法"></a>17、关闭对话框刷新当前页面，在关闭的对话框的动作中调用延时刷新的方法</h4><pre><code class="javascript">Function reflash(){
    setTimeout(“location.reload(true);”,1000);
}
var dialog = new window.top.Dialog();
    dialog.currentWindow = window;
    dialog.URL = dialogurl;
    dialog.Width = width ;
    dialog.Height = height;
    dialog.Title=title;
    dialog.Drag = true;
    dialog.CancelEvent = function(){
      reflash ();
      dialog.close();
    };
    dialog.show();
</code></pre>
<h3 id="（二）、表单-：-必填和编辑"><a href="#（二）、表单-：-必填和编辑" class="headerlink" title="（二）、表单 ： 必填和编辑"></a>（二）、表单 ： 必填和编辑</h3><p>网址：<a href="https://blog.csdn.net/lcwell1990/article/details/77042693" target="_blank" rel="noopener">https://blog.csdn.net/lcwell1990/article/details/77042693</a></p>
<pre><code class="javascript">/**
 * 给字段添加必填验证。
 */
var addInputCheckField = function(fieldId, spanImgId) {
  $(&#39;#&#39; + fieldId).attr(&#39;viewtype&#39;, &#39;1&#39;);
  var fieldStr = $(&#39;input[name=needcheck]&#39;).val();
  if (fieldStr.charAt(fieldStr.length - 1) != &#39;,&#39;) {
    fieldStr += &#39;,&#39;;
  }
  $(&#39;input[name=needcheck]&#39;).val(fieldStr + fieldId + &#39;,&#39;);
  $(&#39;#&#39; + spanImgId).html(&#39;&lt;img src=&quot;/images/BacoError_wev8.gif&quot; align=&quot;absMiddle&quot;&gt;&#39;);
};

/**
 * 移除字段必填验证。
 */
var removeInputCheckField = function(fieldId, spanImgId) {
  $(&#39;#&#39; + fieldId).attr(&#39;viewtype&#39;, &#39;0&#39;);
  var fieldStr = $(&#39;input[name=needcheck]&#39;).val();
  $(&#39;input[name=needcheck]&#39;).val(fieldStr.replace(fieldId + &#39;,&#39;, &#39;&#39;));
  $(&#39;#&#39; + spanImgId).html(&#39;&#39;);
};

/**
 * 调用移除必填验证。
 */
// 移除必填验证，主表文本框、选择框
removeInputCheckField(&#39;field10391&#39;, &#39;field10391span&#39;);  
// 移除必填验证，主表浏览框
removeInputCheckField(&#39;field10849&#39;, &#39;field10849spanimg&#39;); 
// 移除必填验证，明细表文本框、选择框
removeInputCheckField(&#39;field10859_0&#39;, &#39;field10859_0span&#39;);  
// 移除必填验证，明细表浏览框
removeInputCheckField(&#39;field10859_0&#39;, &#39;field10859_0spanimg&#39;); 

/**
 * 调用添加必填验证函数。
 */
// 添加必填验证，主表文本框、选择框
addInputCheckField(&#39;field10391&#39;, &#39;field10391span&#39;); 
// 添加必填验证，主表浏览框
addInputCheckField(&#39;field10849&#39;, &#39;field10849spanimg&#39;);  
// 添加必填验证，明细表文本框、选择框
addInputCheckField(&#39;field10859_0&#39;, &#39;field10859_0span&#39;); 
// 添加必填验证，明细表浏览框
addInputCheckField(&#39;field10859_0&#39;, &#39;field10859_0spanimg&#39;);  

</code></pre>
<h3 id="（三）、泛微JS集成代码"><a href="#（三）、泛微JS集成代码" class="headerlink" title="（三）、泛微JS集成代码"></a>（三）、泛微JS集成代码</h3><h4 id="1、控制日期字段选择范围，比如费用产生日期只能选择当前日期往前十天至今天，否则不允许流程提交"><a href="#1、控制日期字段选择范围，比如费用产生日期只能选择当前日期往前十天至今天，否则不允许流程提交" class="headerlink" title="1、控制日期字段选择范围，比如费用产生日期只能选择当前日期往前十天至今天，否则不允许流程提交"></a>1、控制日期字段选择范围，比如费用产生日期只能选择当前日期往前十天至今天，否则不允许流程提交</h4><pre><code class="javascript">封装方法： cus_judgeDateRange(fieldid, floorday, upperday)
* @param {fieldid} 日期字段ID
* @param {floorday} 下限天数(与当前日期比较)，空值代表不限制
* @param {upperday} 上限天数(与当前日期比较)，空值代表不限制
* @return 返回true表示在范围内，false表示超出限定范围或日期置为空
</code></pre>
<h4 id="2、实时计算两个日期时间字段组合相差小时数，并赋值给另一字段"><a href="#2、实时计算两个日期时间字段组合相差小时数，并赋值给另一字段" class="headerlink" title="2、实时计算两个日期时间字段组合相差小时数，并赋值给另一字段"></a>2、实时计算两个日期时间字段组合相差小时数，并赋值给另一字段</h4><pre><code class="javascript">封装方法：cus_CalTimeDiff(begfields, endfields, unit, digit) 
 * @param {begfields} 开始时间
 * @param {endfields} 结束时间
 * @param {unit} 计量结果单位1(天)、2(小时)、3(分钟)、4(秒)，默认为天
 * @param {digit} 计算结果保留小数位数，默认2位小数
 * @return 以endfields字段值减去beginfields字段值得到时间差值
</code></pre>
<h4 id="3、提交流程时校验结束时间必须大于开始时间，否则不允许流程提交"><a href="#3、提交流程时校验结束时间必须大于开始时间，否则不允许流程提交" class="headerlink" title="3、提交流程时校验结束时间必须大于开始时间，否则不允许流程提交"></a>3、提交流程时校验结束时间必须大于开始时间，否则不允许流程提交</h4><pre><code class="javascript">封装方法：cus_CompareTime(timefield1, timefield2)
 * @param {timefield1} 字段1(开始时间)
 * @param {timefield2} 字段2(结束时间)
 * @return 返回true表示timefield2较大，false表示timefield1较大或相等
 * 注：timefield1/timefield2结构，可为单独日期字段、单独时间字段、日期+时间组合字段(以英文逗号隔开);日期字段空值默认取今天，时间字段空值默认为00:00
</code></pre>
<h4 id="4、E8表单字段中没有单选框（Radio样式），如何实现单选框？将选择框字段转换成单选框显示-编辑"><a href="#4、E8表单字段中没有单选框（Radio样式），如何实现单选框？将选择框字段转换成单选框显示-编辑" class="headerlink" title="4、E8表单字段中没有单选框（Radio样式），如何实现单选框？将选择框字段转换成单选框显示/编辑"></a>4、E8表单字段中没有单选框（Radio样式），如何实现单选框？将选择框字段转换成单选框显示/编辑</h4><pre><code class="javascript">封装方法：cus_ConvertSelectToRadio(fieldids)
 * @param {fields}字段id集合，以逗号隔开
 * 注:转换后可能不支持联动功能，只是转换样式显示/编辑
</code></pre>
<h4 id="5、根据选择框值不同控制明细区域的显示及隐藏"><a href="#5、根据选择框值不同控制明细区域的显示及隐藏" class="headerlink" title="5、根据选择框值不同控制明细区域的显示及隐藏"></a>5、根据选择框值不同控制明细区域的显示及隐藏</h4><pre><code class="javascript">步骤一：设计器明细所在单元格/行设置自定义属性name:_detailarea
步骤二：代码块插入
cus_HideAreaByName(&quot;_detailarea&quot;);    //封装的根据name属性隐藏区域方法
cus_ShowAreaByName(&quot;_detailarea&quot;);    //封装的根据name属性显示区域方法
</code></pre>
<h4 id="6、根据选择框值不同控制明细列的隐藏-显示"><a href="#6、根据选择框值不同控制明细列的隐藏-显示" class="headerlink" title="6、根据选择框值不同控制明细列的隐藏/显示"></a>6、根据选择框值不同控制明细列的隐藏/显示</h4><pre><code class="javascript">步骤一：需要隐藏的列设置列自定义属性class:_detailcolumn
步骤二：代码块插入
封装接口：cus_ControlDetailColumnByClass(cusclassname, status)
 * @param {cusclassname}  列自定义class属性
 * @param {status}  1为显示，2为隐藏
</code></pre>
<h4 id="7、验证指定字段必填"><a href="#7、验证指定字段必填" class="headerlink" title="7、验证指定字段必填"></a>7、验证指定字段必填</h4><pre><code class="javascript">cus_verifyExistNullField(&quot;field13031,field13032&quot;, &quot;字段未填写&quot;);    //封装的校验是否存在空值字段方法
</code></pre>
<h4 id="8、根据字段ID，直接获取字段对应值"><a href="#8、根据字段ID，直接获取字段对应值" class="headerlink" title="8、根据字段ID，直接获取字段对应值"></a>8、根据字段ID，直接获取字段对应值</h4><pre><code class="javascript">cus_getFieldValue(fieldid)
</code></pre>
<h4 id="9、给文本类型字段赋值"><a href="#9、给文本类型字段赋值" class="headerlink" title="9、给文本类型字段赋值"></a>9、给文本类型字段赋值</h4><pre><code class="javascript">cus_setInputFieldValue(fieldid, fieldvalue)
</code></pre>
<h4 id="10、明细行需要注意的地方"><a href="#10、明细行需要注意的地方" class="headerlink" title="10、明细行需要注意的地方"></a>10、明细行需要注意的地方</h4><pre><code class="javascript">明细行数据行数：indexnum0
明细行序号行数：nodesnum0

var indexnum0=jQuery(&quot;#indexnum0&quot;).val();
</code></pre>
<h4 id="11、流程浏览按钮拼接"><a href="#11、流程浏览按钮拼接" class="headerlink" title="11、流程浏览按钮拼接"></a>11、流程浏览按钮拼接</h4><pre><code class="javascript">function BrowseBoxData(viewtype, ahtml, id) {
  var ismust = 1;
  if (viewtype == &#39;1&#39;) {
    ismust = 2;
  }

  var str = &quot;&lt;span class=\&quot;e8_showNameClass\&quot;&gt;&quot;;
  str += ahtml;

  // str += &quot;&lt;span class=\&quot;e8_delClass\&quot; id=\&quot;&quot; + id + &quot;\&quot; οnclick=\&quot;del(event,this,&quot; + ismust + &quot;,false,{});\&quot; style=\&quot;opacity: 1; visibility: visible;\&quot;&gt;&amp;nbsp;x&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&quot;;
  str += &quot;&lt;span class=\&quot;e8_delClass\&quot; id=\&quot;&quot; + id + &quot;\&quot; οnclick=\&quot;del(event,this,&quot; + ismust + &quot;,false,{});\&quot; style=\&quot;opacity: 0; visibility: hidden;\&quot;&gt;&amp;nbsp;x&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&quot;;
  return str;
};
</code></pre>
<h3 id="（四）、ecology8"><a href="#（四）、ecology8" class="headerlink" title="（四）、ecology8"></a>（四）、ecology8</h3><p>网址：<a href="https://www.cnblogs.com/lroy/category/1556908.html" target="_blank" rel="noopener">https://www.cnblogs.com/lroy/category/1556908.html</a></p>
<h4 id="1、清空明细表行"><a href="#1、清空明细表行" class="headerlink" title="1、清空明细表行"></a>1、清空明细表行</h4><pre><code class="javascript">$(&quot;#oTable0 tr[_target=&#39;datarow&#39;]&quot;).remove();//清空明细行 
$(&quot;#nodesnum0&quot;).val(0);//重置明细表1当前行计数
</code></pre>
<h4 id="2、常用内置函数"><a href="#2、常用内置函数" class="headerlink" title="2、常用内置函数"></a>2、常用内置函数</h4><h5 id="（1）-日期字段选择限制范围"><a href="#（1）-日期字段选择限制范围" class="headerlink" title="（1）.日期字段选择限制范围"></a>（1）.日期字段选择限制范围</h5><pre><code class="javascript">/**
 * 日期字段选择限制范围
 * @param {fieldid}   日期字段ID
 * @param {floorday}  下限天数(与当前日期比较)，空值代表不限制
 * @param {upperday}  上限天数(与当前日期比较)，空值代表不限制
 * @return 返回true表示在范围内，false表示超出限定范围或日期置为空
 */
function cus_judgeDateRange(fieldid, floorday, upperday){
  var fieldObj = jQuery(&quot;input[name=&quot;+fieldid+&quot;]&quot;);
  if(fieldObj.size() == 0)
    return false;
  var fieldval = fieldObj.val();
  if(!!!fieldval)   
    return false;
  floorday = (floorday === &quot;&quot; ? -99999 : parseInt(floorday));
  upperday = (upperday === &quot;&quot; ? 99999 : parseInt(upperday));
  var curdate = new Date();
  var defdate = curdate.getFullYear()+&quot;-&quot;+(curdate.getMonth()+1)+&quot;-&quot;+curdate.getDate();
  var diffdays = (new Date(fieldval.replace(/-/g, &quot;/&quot;)).getTime() - new Date(defdate.replace(/-/g, &quot;/&quot;)).getTime())/(24*3600*1000);
  diffdays = Math.ceil(diffdays);
  if(diffdays &gt;= floorday &amp;&amp; diffdays &lt;= upperday)
    return true;
  else
    return false;
}
</code></pre>
<h5 id="（2）-计算时间差"><a href="#（2）-计算时间差" class="headerlink" title="（2）.计算时间差"></a>（2）.计算时间差</h5><pre><code class="javascript">/**
 * 计算时间差
 * @param {begfields} 开始时间
 * @param {endfields} 结束时间
 * @param {unit}  计量结果单位1(天)、2(小时)、3(分钟)、4(秒)，默认为天
 * @param {digit}   计算结果保留小数位数，默认2位小数
 * @return 以endfields字段值减去beginfields字段值得到时间差值
 * 注：begfields/endfields结构，可为单独日期字段、单独时间字段、日期+时间组合字段(以英文逗号隔开);日期字段空值默认取今天，时间字段空值默认为00:00
 */
function cus_CalTimeDiff(begfields, endfields, unit, digit){
  if(!!!begfields || !!!endfields)
    return &quot;ParamsError&quot;;
  var diffmillsecond = cus_GetTimeDiffMillSecond(begfields, endfields);
  var diffsecond = diffmillsecond/1000;
  unit = !!unit ? parseInt(unit) : 1;
  digit = (!!digit || digit == 0) ? parseInt(digit) : 2;
  var retdiff = 0;
  if(unit === 1)
    retdiff = diffsecond/(3600*24);
  else if(unit === 2)
    retdiff = diffsecond/3600;
  else if(unit === 3)
    retdiff = diffsecond/60;
  else if(unit === 4)
    retdiff = diffsecond;
  if(digit === 0)
    retdiff = Math.floor(retdiff);  //向下取整
  else
    retdiff = retdiff.toFixed(digit);
  return retdiff;
}
</code></pre>
<h5 id="（3）-比较timefield1与timefield2两字段时间大小"><a href="#（3）-比较timefield1与timefield2两字段时间大小" class="headerlink" title="（3）.比较timefield1与timefield2两字段时间大小"></a>（3）.比较timefield1与timefield2两字段时间大小</h5><pre><code class="javascript">/**
 * 比较timefield1与timefield2两字段时间大小
 * @param {timefield1} 字段1(开始时间)
 * @param {timefield2} 字段2(结束时间)
 * @return 返回true表示timefield2较大，false表示timefield1较大或相等
 * 注：timefield1/timefield2结构，可为单独日期字段、单独时间字段、日期+时间组合字段(以英文逗号隔开);日期字段空值默认取今天，时间字段空值默认为00:00
 */
function cus_CompareTime(timefield1, timefield2){
  var diffmillsecond = cus_GetTimeDiffMillSecond(timefield1, timefield2);
  return diffmillsecond &gt; 0;
}
</code></pre>
<h5 id="（4）-计算两时间字段相差毫秒数"><a href="#（4）-计算两时间字段相差毫秒数" class="headerlink" title="（4）.计算两时间字段相差毫秒数"></a>（4）.计算两时间字段相差毫秒数</h5><pre><code class="javascript">//计算两时间字段相差毫秒数
function cus_GetTimeDiffMillSecond(field1, field2){
  var timeval1 = cus_getTimeValueByField(field1);
  var timeval2 = cus_getTimeValueByField(field2);
  var diffmillsecond = new Date(timeval2.replace(/-/g, &quot;/&quot;)).getTime() - new Date(timeval1.replace(/-/g,&quot;/&quot;)).getTime();
  return diffmillsecond;
}
</code></pre>
<h5 id="（5）-根据日期-时间字段ID取标准格式时间值"><a href="#（5）-根据日期-时间字段ID取标准格式时间值" class="headerlink" title="（5）.根据日期/时间字段ID取标准格式时间值"></a>（5）.根据日期/时间字段ID取标准格式时间值</h5><pre><code class="javascript">//根据日期/时间字段ID取标准格式时间值
function cus_getTimeValueByField(fields){
  var timeval;
  var fieldArr = fields.split(&quot;,&quot;);
  if(fieldArr.length === 1)
    timeval = jQuery(&quot;input[name=&quot;+fieldArr[0]+&quot;]&quot;).val();
  else if(fieldArr.length &gt; 1)
    timeval = jQuery(&quot;input[name=&quot;+fieldArr[0]+&quot;]&quot;).val() + &quot; &quot; + jQuery(&quot;input[name=&quot;+fieldArr[1]+&quot;]&quot;).val();
  var curdate = new Date();
  var defdate = curdate.getFullYear()+&quot;-&quot;+(curdate.getMonth()+1)+&quot;-&quot;+curdate.getDate();
  if(timeval.indexOf(&quot;-&quot;) == -1)    timeval = defdate + &quot; &quot; + timeval;
  return timeval;
}
</code></pre>
<h5 id="（6）-选择框转换成Radio框样式显示-编辑"><a href="#（6）-选择框转换成Radio框样式显示-编辑" class="headerlink" title="（6）.选择框转换成Radio框样式显示/编辑"></a>（6）.选择框转换成Radio框样式显示/编辑</h5><pre><code class="javascript">/**
 * 选择框转换成Radio框样式显示/编辑
 * @param {fields}  字段id集合，以逗号隔开
 * 注:转换后可能不支持联动功能，只是转换样式显示/编辑
 */
function cus_ConvertSelectToRadio(fieldids){
  jQuery.each(fieldids.split(&quot;,&quot;), function(i, fieldid){
    var isdisabled = false;
    var selectObj = jQuery(&quot;select[name=dis&quot;+fieldid+&quot;]&quot;);
    if(selectObj.size() &gt; 0){
      isdisabled = true;
    }else{
      selectObj = jQuery(&quot;select[name=&quot;+fieldid+&quot;]&quot;);
      if(selectObj.size() == 0) return true;
    }
    var radioHtml = &quot;&quot;;
    selectObj.find(&quot;option&quot;).each(function(){
      var selval = jQuery(this).val();
      var seltext = jQuery(this).text();
      if(selval != &quot;&quot;){
        radioHtml += &#39;&lt;input type=&quot;radio&quot; name=&quot;opt&#39;+fieldid+&#39;&quot; value=&quot;&#39;+selval+&#39;&quot; &#39;;
        if(jQuery(this).is(&quot;:selected&quot;))
          radioHtml += &#39; checked&#39;;
        if(isdisabled)
          radioHtml += &#39; disabled&#39;;
        else
          radioHtml += &#39; onclick=&quot;cus_SyncSelectVal(this)&quot;&#39;
        radioHtml += &#39; /&gt;&#39; + seltext + &quot;&amp;nbsp;&amp;nbsp;&quot;;
      }
    });
    selectObj.after(radioHtml);
    selectObj.hide();
    if(isdisabled){
      window.setTimeout(function(){
        selectObj.parent().find(&quot;span:not([id])&quot;).css(&quot;display&quot;,&quot;none&quot;);
      },200);
    }
  })
}
</code></pre>
<h5 id="（7）-点击Radio反向回写Select框"><a href="#（7）-点击Radio反向回写Select框" class="headerlink" title="（7）.点击Radio反向回写Select框"></a>（7）.点击Radio反向回写Select框</h5><pre><code class="javascript">//点击Radio反向回写Select框
function cus_SyncSelectVal(vthis){
  var radioname = jQuery(vthis).attr(&quot;name&quot;);
  var selectObj = jQuery(&quot;select[name=&#39;&quot;+radioname.substring(3)+&quot;&#39;]&quot;);
  selectObj.val(jQuery(vthis).val());
  try{
    selectObj.trigger(&quot;blur&quot;).trigger(&quot;change&quot;);
  }catch(e){}
}
</code></pre>
<h5 id="（8）-显示指定区域"><a href="#（8）-显示指定区域" class="headerlink" title="（8）.显示指定区域"></a>（8）.显示指定区域</h5><pre><code class="javascript">/**
 * 显示指定区域
 * @param {areanames} 自定义属性中设置的name属性区域集合，多个以逗号隔开
 */
function cus_ShowAreaByName(areanames){
  jQuery.each(areanames.split(&quot;,&quot;), function(i,value){
    jQuery(&quot;[name=&quot;+value+&quot;]&quot;).show().removeClass(&quot;edesign_hide&quot;);
  });
}
</code></pre>
<h5 id="（8）-隐藏指定区域，隐藏的区域不校验必填"><a href="#（8）-隐藏指定区域，隐藏的区域不校验必填" class="headerlink" title="（8）.隐藏指定区域，隐藏的区域不校验必填"></a>（8）.隐藏指定区域，隐藏的区域不校验必填</h5><pre><code class="javascript">/**
 * 隐藏指定区域，隐藏的区域不校验必填
 * @param {areanames} 自定义属性中设置的name属性区域集合，多个以逗号隔开
 */
function cus_HideAreaByName(areanames){
  jQuery.each(areanames.split(&quot;,&quot;), function(i,value){
    jQuery(&quot;[name=&quot;+value+&quot;]&quot;).hide().addClass(&quot;edesign_hide&quot;);
  });
}
</code></pre>
<h5 id="（9）-控制明细列隐藏-显示"><a href="#（9）-控制明细列隐藏-显示" class="headerlink" title="（9）.控制明细列隐藏/显示"></a>（9）.控制明细列隐藏/显示</h5><pre><code class="javascript">/**
 * 控制明细列隐藏/显示
 * @param {cusclassname}  列自定义class属性
 * @param {status}  1为显示，2为隐藏
 */
function cus_ControlDetailColumnByClass(cusclassname, status){
  if(status === 1)
    jQuery(&quot;td.&quot;+cusclassname).show().removeClass(&quot;edesign_hide&quot;);
  else if(status === 2)
    jQuery(&quot;td.&quot;+cusclassname).hide().addClass(&quot;edesign_hide&quot;);
}
</code></pre>
<h5 id="（10）-校验字段是否必填，不满足弹出提"><a href="#（10）-校验字段是否必填，不满足弹出提" class="headerlink" title="（10）.校验字段是否必填，不满足弹出提"></a>（10）.校验字段是否必填，不满足弹出提</h5><pre><code class="javascript">/**
 * 校验字段是否必填，不满足弹出提示
 * @param {fieldid} 需校验的字段ID，多个以逗号分隔
 * @param {alertmsg} 存在未必填字段时弹出提示信息，空则不提示
 * @return true代表存在未填写字段，false表示校验通过
 */
function cus_verifyExistNullField(fieldids, alertmsg){
  var existNullField = false;
  jQuery.each(fieldids.split(&quot;,&quot;), function(i, fieldid){
    var fieldObj = jQuery(&quot;[name=&quot;+fieldid+&quot;]&quot;);
    if(fieldObj.size() == 0 || fieldObj.is(&quot;input[type=checkbox]&quot;))
      return true;
    var fieldval = cus_getFieldValue(fieldid);
    if(fieldval === &quot;&quot;){
      existNullField = true;
      return false;
    }
  })
  if(existNullField &amp;&amp; !!alertmsg)
    alert(alertmsg);
  return existNullField;
}
</code></pre>
<h5 id="（11）-根据字段ID取字段值"><a href="#（11）-根据字段ID取字段值" class="headerlink" title="（11）.根据字段ID取字段值"></a>（11）.根据字段ID取字段值</h5><pre><code class="javascript">/**
 * 根据字段ID取字段值
 * @param {fieldid} 字段ID
 * @return 字段对应值
 * 注：支持文本、多行文本框、浏览框(ID值)、选择框、check框(选中为1未选中为0)
 */
function cus_getFieldValue(fieldid){
  var fieldObj = jQuery(&quot;[name=&quot;+fieldid+&quot;]&quot;);
  if(fieldObj.size() == 0)  return &quot;&quot;;
  var fieldval = &quot;&quot;;
  if(fieldObj.is(&quot;input[type=checkbox]&quot;)){
    if(fieldObj.is(&quot;:checked&quot;))
      fieldval = &quot;1&quot;;
    else
      fieldval = &quot;0&quot;;
  }else if(fieldObj.is(&quot;input&quot;)){
    fieldval = fieldObj.val();
    if(!!fieldval &amp;&amp; fieldObj.attr(&quot;datavaluetype&quot;) == &quot;5&quot;)
      fieldval = fieldval.replace(/,/g,&quot;&quot;);
  }else if(fieldObj.is(&quot;textarea&quot;)){
    fieldval = fieldObj.text();
  }else if(fieldObj.is(&quot;select&quot;)){
    fieldval = fieldObj.find(&quot;option:selected&quot;).val();
  }
  return fieldval;
}
</code></pre>
<h5 id="（12）-给文本字段赋值，支持只读-编辑情况"><a href="#（12）-给文本字段赋值，支持只读-编辑情况" class="headerlink" title="（12）.给文本字段赋值，支持只读/编辑情况"></a>（12）.给文本字段赋值，支持只读/编辑情况</h5><pre><code class="javascript">/**
 * 给文本字段赋值，支持只读/编辑情况
 * @param {fieldid} 字段ID
 * @param {fieldvalue}  字段值 
 */
function cus_setInputFieldValue(fieldid, fieldvalue){
  var fieldObj = jQuery(&quot;input[name=&quot;+fieldid+&quot;]&quot;);
  if(fieldObj.size() == 0)  return;
  fieldObj.val(fieldvalue);
  if(fieldObj.attr(&quot;type&quot;)==&quot;hidden&quot;){    //只读
    jQuery(&quot;span#&quot;+fieldid+&quot;span&quot;).text(fieldvalue);
  }else{
    if(!!fieldvalue)  //去必填标示
      jQuery(&quot;span#&quot;+fieldid+&quot;span&quot;).text(&quot;&quot;);
  }
}
</code></pre>
<h3 id="（五）、泛微OA常用js代码块"><a href="#（五）、泛微OA常用js代码块" class="headerlink" title="（五）、泛微OA常用js代码块"></a>（五）、泛微OA常用js代码块</h3><h4 id="1、泛微系统alert提示框"><a href="#1、泛微系统alert提示框" class="headerlink" title="1、泛微系统alert提示框"></a>1、泛微系统alert提示框</h4><pre><code class="javascript">Dialog.alert(&quot;警告框&quot;);
</code></pre>

        </div>
        <!-- .entry-content -->
        <div class="single-reward">
          <div class="reward-open">赏
            <div class="reward-main">
              <ul class="reward-row">
                <li class="alipay-code"><img src="https://cdn.jsdelivr.net/gh/Fromtimeinjury/cdn@1.1/img/custom/donate/AliPayQR.jpg"></li>
                <li class="wechat-code"><img src="https://cdn.jsdelivr.net/gh/Fromtimeinjury/cdn@1.1/img/custom/donate/WeChanQR.jpg"></li>
              </ul>
            </div>
          </div>
        </div>
        <div style="text-align:center; width: 100%" class="social-share share-mobile" data-disabled="diandian, tencent"></div>
        <footer class="post-footer">
          <div class="post-lincenses"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="nofollow"><i class="fa fa-creative-commons" aria-hidden="true"></i> 知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a></div>
          <div class="post-tags">
          </div>
          <div class="post-share">
            <div class="social-share sharehidden share-component"></div>
            <i class="iconfont show-share icon-forward"></i>
          </div>
        </footer><!-- .entry-footer -->
      </article>
      <!-- #post-## -->
      <div class="toc" style="background: none;"></div>
      <section class="post-squares nextprev">
        
        
          
            <div class="post-nepre full next">
          
            <a href="/2021/07/18/Hexo-美化/" rel="next">
              <div class="background">
                <img class="lazyload" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/loader/orange.progress-bar-stripe-loader.svg" data-src="" style="width: 100%; height: 100%; object-fit: cover; pointer-events: none;" onerror="imgError(this,3)" src="">
              </div>
              <span class="label">
              Next Post</span>
              <div class="info">
                <h3>
                Hexo 美化</h3>
                <hr>
              </div>
            </a>
          </div>
        
      </section>
      
<div id="vcomments"></div>
<script>
  window.onload = function(){
      var valine = new Valine();
      valine.init({
        el: '#vcomments',
        appId: "GyC3NzMvd0hT9Yyd2hYIC0MN-gzGzoHsz",
        appKey: "mgOpfzbkHYqU92CV4IDlAUHQ",
        path: window.location.pathname,
        placeholder: "你是我一生只会遇见一次的惊喜 ..."
      })
  }
</script>

      <section class="author-profile">
        <div class="info" itemprop="author" itemscope="" itemtype="https://schema.org/Person">
          <a href="dev.中国" class="profile gravatar"><img src="https://wx1.sinaimg.cn/large/006bYVyvgy1ftand2qurdj303c03cdfv.jpg" itemprop="image" alt="Lucky" height="70" width="70"></a>
          <div class="meta">
            <span class="title">Author</span>
            <h3 itemprop="name">
            <a href="dev.中国" itemprop="url" rel="author">Lucky</a>
            </h3>
          </div>
        </div>
        <hr>
        <p><i class="iconfont icon-write"></i>一个好奇的人</p>
      </section>
    </main><!-- #main -->
  </div><!-- #primary -->
</div>



    </div>    
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="请输入关键词..."/>
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            // PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
    <!-- <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 Lucky<br>
      powered_by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer> -->
<footer id="colophon" class="site-footer" role="contentinfo">
  <div class="site-info">
    <div class="footertext">
      <div class="img-preload">
        <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/wordpress-rotating-ball-o.svg">
        <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/disqus-preloader.svg">
      </div>
      <p style="color: #666666;">&copy 2018</p>
    </div>
    <div class="footer-device">
    <p style="font-family: 'Ubuntu', sans-serif;">
        <span style="color: #b9b9b9;">Theme <a href="https://github.com/honjun/hexo-theme-sakura" target="_blank" style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Sakura</a> <i class="iconfont icon-sakura rotating" style="color: #ffc0cb;display:inline-block"></i> by <a href="https://2heng.xin/" target="_blank" style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Mashiro</a>&<a href="https://www.hojun.cn/" target="_blank" style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Hojun</a>, Powered by Hexo, Hosted by Coding Pages</a>
        </span>
      </p>
    </div>
  </div><!-- .site-info -->
</footer>



<!-- <script src="/js/tocbot.js"></script> -->
<script type="text/javascript" src="/js/lib.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script type="text/javascript" src="/js/InsightSearch.js"></script>
<script type="text/javascript" src="/js/jquery.fancybox.min.js"></script>
<script type="text/javascript" src="/js/zoom.min.js"></script>
<script type="text/javascript" src="/js/sakura-app.js"></script>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='//unpkg.com/valine@1.3.4/dist/Valine.min.js'></script>
<script src="/js/botui.js"></script>
<!-- 不蒜子 网页计数器 -->
<script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script> -->
<script type="text/javascript">
/* <![CDATA[ */
if (/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
  var Poi = {"pjax":"1","movies":{"url": "https://cdn.jsdelivr.net/gh/honjun/hojun@1.2","name":"Unbroken.mp4","live":"close"},"windowheight":"fixed","codelamp":"close","ajaxurl":"","order":"asc","formpostion":"bottom"};
} else {
  var Poi = {"pjax":"1","movies":{"url": "https://cdn.jsdelivr.net/gh/honjun/hojun@1.2","name":"Unbroken.mp4","live":"open"},"windowheight":"auto","codelamp":"close","ajaxurl":"","order":"asc","formpostion":"bottom"};
}
/* ]]> */

</script>
<script>
$(document).ready(function() {
  if ($(".toc").length > 0 && document.body.clientWidth > 1200) {
    if ($(".pattern-center").length > 0) { //有图的情况
      tocbot.init({
          // Where to render the table of contents.
          tocSelector: '.toc', // 放置目录的容器
          // Where to grab the headings to build the table of contents.
          contentSelector: '.entry-content', // 正文内容所在
          // Which headings to grab inside of the contentSelector element.
          scrollSmooth: true,
          headingSelector: 'h1, h2, h3, h4, h5', // 需要索引的标题级别
          headingsOffset: -400,
          scrollSmoothOffset: -85
      });
    } else {
      tocbot.init({
          // Where to render the table of contents.
          tocSelector: '.toc', // 放置目录的容器
          // Where to grab the headings to build the table of contents.
          contentSelector: '.entry-content', // 正文内容所在
          // Which headings to grab inside of the contentSelector element.
          scrollSmooth: true,
          headingSelector: 'h1, h2, h3, h4, h5', // 需要索引的标题级别
          headingsOffset: -85,
          scrollSmoothOffset: -85
      });
    }
    var offsetTop = $('.toc').offset().top - 95;
    window.onscroll = function() {
      var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;
      if (scrollTop >= offsetTop) {
        $('.toc').addClass('toc-fixed');
      } else {
        $('.toc').removeClass('toc-fixed');
      }
    }
  }
});
</script>

    <div class="openNav no-select" style="height: 50px;">
      <div class="iconflat no-select" style="width: 50px; height: 50px;">
        <div class="icon"></div>
      </div>
      <div class="site-branding search-form-submit">
        <i class="iconfont js-toggle-search iconsearch icon-search"></i>
      </div>
    </div>
  </section>
  <div id="mo-nav" class="">
  <div class="m-avatar">
    <img src="https://cdn.jsdelivr.net/gh/Fromtimeinjury/cdn@1.1/img/custom/avatar.jpg">
  </div>
  <p style="text-align: center; color: #333; font-weight: 900; font-family: 'Ubuntu', sans-serif; letter-spacing: 1.5px">こううんLucky</p>
  <p style="text-align: center; word-spacing: 20px;">
    
      
        <a href="https://github.com/Fromtimeinjury" class="fa fa-github" target="_blank" style="color: #333; margin-left:20px"></a>
      
    
  </p>
  <ul id="menu-new-1" class="menu">
    
      <li>
        <a href="/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-fort-awesome faa-shake" aria-hidden="true"></i>
            首页
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/archives">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-archive faa-shake" aria-hidden="true"></i>
            归档
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/categories/技术/">
                  <i class="fa fa-code" aria-hidden="true"></i>
                  技术
                </a>
              </li>
            
              <li>
                <a href="/categories/生活/">
                  <i class="fa fa-file-text-o" aria-hidden="true"></i>
                  生活
                </a>
              </li>
            
              <li>
                <a href="/categories/资源/">
                  <i class="fa fa-cloud-download" aria-hidden="true"></i>
                  资源
                </a>
              </li>
            
              <li>
                <a href="/categories/随想/">
                  <i class="fa fa-commenting-o" aria-hidden="true"></i>
                  随想
                </a>
              </li>
            
              <li>
                <a href="/categories/转载/">
                  <i class="fa fa-book" aria-hidden="true"></i>
                  转载
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="javascript:;">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-list-ul faa-vertical" aria-hidden="true"></i>
            清单
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/tags/悦读/">
                  <i class="fa fa-th-list faa-bounce" aria-hidden="true"></i>
                  书单
                </a>
              </li>
            
              <li>
                <a href="/bangumi/">
                  <i class="fa fa-film faa-vertical" aria-hidden="true"></i>
                  番组
                </a>
              </li>
            
              <li>
                <a href="/music/">
                  <i class="fa fa-headphones" aria-hidden="true"></i>
                  歌单
                </a>
              </li>
            
              <li>
                <a href="/tags/图集/">
                  <i class="fa fa-photo" aria-hidden="true"></i>
                  图集
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="/tags/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-tag" aria-hidden="true"></i>
            标签
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/comment/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-pencil-square-o faa-tada" aria-hidden="true"></i>
            留言板
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/links/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-link faa-shake" aria-hidden="true"></i>
            友人帐
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/donate/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-heart faa-pulse" aria-hidden="true"></i>
            赞赏
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-leaf faa-wrench" aria-hidden="true"></i>
            关于
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/about/">
                  <i class="fa fa-meetup" aria-hidden="true"></i>
                  我？
                </a>
              </li>
            
              <li>
                <a href="/theme-sakura/">
                  <i class="fa iconfont icon-sakura" aria-hidden="true"></i>
                  主题
                </a>
              </li>
            
              <li>
                <a href="/lab/">
                  <i class="fa fa-cogs" aria-hidden="true"></i>
                  Lab
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="/client/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-android faa-vertical" aria-hidden="true"></i>
            客户端
          </span>
        </a>
        
      </li>
    
  </ul>
  <p style="text-align: center; font-size: 13px; color: #b9b9b9;">&copy 2019 hexo-sakura</p>
</div>
<button onclick="topFunction()" class="mobile-cd-top" id="moblieGoTop" title="Go to top" style="display: none;"><i class="fa fa-chevron-up" aria-hidden="true"></i></button>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">
<script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>
<!-- require MetingJS -->
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>
<style>
  .aplayer .aplayer-lrc {
    height: 35px;
  }
  .aplayer .aplayer-lrc p{
    font-size: 16px;
    font-weight: 700;
    line-height: 18px !important;
  }
  .aplayer .aplayer-lrc p.aplayer-lrc-current{
    color: #FF1493;
  }
  .aplayer.aplayer-narrow .aplayer-body{
    left: -66px !important;
  }
  .aplayer.aplayer-fixed .aplayer-lrc {
    display: none;
  }
  .aplayer .aplayer-lrc.aplayer-lrc-hide {
      display:none !important;
  }
  .aplayer.aplayer-fixed .lrc-show {
    display: block;
    background: rgba(255, 255, 255, 0.8);
  }
</style>
<meting-js

    id="2660651585"

    server="netease"

    type="playlist"

    fixed="true"

    autoplay="false"

    loop="all"

    order="random"

    preload="auto"

    volume="0.7"

    mutex="true"

</meting-js>
<script>
  $(function(){
    $('body').on('click', '.aplayer', function(){
      if($('.aplayer-button').hasClass('aplayer-play')) {
        $('.aplayer-lrc').removeClass('lrc-show');
      } else {
        $('.aplayer-lrc').addClass('lrc-show');
      }
    })
  });
</script>

  <script src="https://cdn.jsdelivr.net/gh/wallleap/cdn/js/xuehua.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/wallleap/cdn/js/piao.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/wallleap/cdn/js/canvas-nest.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/wallleap/cdn/js/sakura.js"></script>


</script>
  <!-- 点击出现彩色气球爆炸效果 -->
  <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas> 
  <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script> 
  <script src="https://cdn.jsdelivr.net/gh/wallleap/cdn/js/clickBom.js">
</script>

  <!-- 禁用一些按键 -->
  <script src="https://cdn.jsdelivr.net/gh/wallleap/cdn/js/noSomeKey.js"></script>
  <!-- 预加载，懒加载 -->
  <script src="//instant.page/3.0.0" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script>
  <!-- 添加计数 -->
  <script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <!-- 画板娘 -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css"> <!-- 这条在sakura中已有，可不添加 --><script src="https://cdn.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/autoload.js"></script>
  <script type="text/javascript" src="/js/FunnyTitle.js"></script>
</body>
</html>